(window.webpackJsonp=window.webpackJsonp||[]).push([[25,10],{585:function(e,t,l){"use strict";l.r(t);var n=l(130),r=l(93),o=l(638),c=l(583),d=l(584),f=l(604),m=l(268),v=l(220),h=(l(31),l(178),l(12),l(14),l(13),l(6),l(20),l(15),l(21),l(11)),_=l(4),D=(l(55),l(572)),k=l(118),y=l(599);function O(e,t){var l=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),l.push.apply(l,n)}return l}function w(e){for(var t=1;t<arguments.length;t++){var l=null!=arguments[t]?arguments[t]:{};t%2?O(Object(l),!0).forEach((function(t){Object(_.a)(e,t,l[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(l)):O(Object(l)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(l,t))}))}return e}var C={props:{isDialog:{type:Boolean,default:!1},diller:{type:Object,default:null}},components:{ClientForm:y.default,LoadingComponent:D.default},data:function(){return{isLoading:!1,page:1,headers:[{text:"Id",value:"id",sortable:!1},{text:"Card number",value:"cardnumber",sortable:!1},{text:"Name - Surname",value:"name",sortable:!1},{text:"Phone number",value:"telnumber",sortable:!1},{text:"Paket",value:"packet",sortable:!1},{text:"Srok",value:"srok",sortable:!1},{text:"Actions",value:"actions",width:"10%",align:"right",sortable:!1}],selectedClient:null,clientFormDialog:!1,deleteConfirmDialog:!1,search:null,limit:20,pageLimits:[10,20,30,50,100]}},watch:{page:function(){this.loadData()},limit:function(){this.resetList()},search:function(){this.resetList()}},methods:w(w({},Object(k.b)({loadClients:"clients/loadAllClients",deleteClient:"clients/deleteClient"})),{},{resetList:function(){this.page=1,this.loadData()},closeDialog:function(){this.$emit("closeDialog")},loadData:function(){var e=this;return Object(h.a)(regeneratorRuntime.mark((function t(){var l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.isLoading=!0,t.next=3,e.loadClients({page:e.page,diller_id:null===(l=e.diller)||void 0===l?void 0:l.id,search:e.search,limit:e.limit});case 3:e.isLoading=!1;case 4:case"end":return t.stop()}}),t)})))()},goToDetail:function(e){this.$router.push("clients/"+e.id)},selectForEdit:function(e){this.selectedClient=e,this.clientFormDialog=!0},selectForDelete:function(e){this.selectedClient=e,this.deleteConfirmDialog=!0},closeClientFormDialog:function(){this.selectedClient=null,this.clientFormDialog=!1}}),computed:w(w({},Object(k.c)({clients:"clients/get_clients_list",total:"clients/get_total_count"})),{},{page_count:function(){return Math.ceil(this.total/this.limit)}}),mounted:function(){this.loadData()}},j=l(87),component=Object(j.a)(C,(function(){var e=this,t=e._self._c;return t("div",{staticStyle:{position:"relative"}},[t(r.d,[e._v("\n    Cards\n    "),t(m.a),e._v(" "),t(n.a,{staticStyle:{"background-color":"#32BCA3",color:"white"},attrs:{depressed:"",small:""},on:{click:function(t){e.clientFormDialog=!0}}},[t("span",{staticClass:"mdi mdi-plus mdi-18px"})]),e._v(" "),e.isDialog?t(n.a,{staticStyle:{"background-color":"darkred",color:"white","margin-left":"10px"},attrs:{depressed:"",small:""},on:{click:e.closeDialog}},[t("span",{staticClass:"mdi mdi-close mdi-18px"})]):e._e()],1),e._v(" "),t(c.a),e._v(" "),t("div",{staticStyle:{display:"flex"}},[t(v.a,{staticStyle:{flex:"3"},attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),e._v(" "),e.$device.isDesktop?t("div",{staticStyle:{flex:"3"}}):t("div",{staticStyle:{width:"10px"}}),e._v(" "),t("div",{staticStyle:{flex:"1"}},[t(f.a,{attrs:{items:e.pageLimits},model:{value:e.limit,callback:function(t){e.limit=t},expression:"limit"}})],1)],1),e._v(" "),t(o.a,{attrs:{"hide-default-footer":"","disable-pagination":"",headers:e.headers,items:e.clients},scopedSlots:e._u([{key:"item.actions",fn:function(l){var n=l.item;return[t("span",{staticClass:"mdi mdi-eye mdi-18px icon-button-class",on:{click:function(t){return e.goToDetail(n)}}}),e._v(" "),t("span",{staticClass:"mdi mdi-pencil mdi-18px icon-button-class",on:{click:function(t){return e.selectForEdit(n)}}}),e._v(" "),t("span",{staticClass:"mdi mdi-delete mdi-18px icon-button-class",on:{click:function(t){return e.selectForDelete(n)}}})]}}])}),e._v(" "),t(c.a),e._v(" "),e.clientFormDialog?t("client-form",{attrs:{client:e.selectedClient},on:{closeDialog:e.closeClientFormDialog,resetList:e.resetList}}):e._e(),e._v(" "),e.isLoading?t("loading-component"):e._e(),e._v(" "),e.page_count>1?t(d.a,{attrs:{length:e.page_count,circle:""},model:{value:e.page,callback:function(t){e.page=t},expression:"page"}}):e._e()],1)}),[],!1,null,null,null);t.default=component.exports;installComponents(component,{LoadingComponent:l(572).default})},586:function(e,t,l){"use strict";l.r(t);var n=l(130),r=l(117),o=l(93),c=l(583),d=l(268),f=l(11),m=(l(55),{components:{LoadingComponent:l(572).default},props:{message:{type:String,default:"Deleted record cant be restored!!"},isLoading:{type:Boolean,default:!1}},methods:{closeDialog:function(){this.$emit("closeDialog")},deleteRecordHandler:function(){var e=this;return Object(f.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.$emit("deleteAccepted");case 1:case"end":return t.stop()}}),t)})))()}}}),v=l(87),component=Object(v.a)(m,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"popUpBg"},[t("div",{staticClass:"popUpCardClass",staticStyle:{width:"30%"}},[t(r.a,{staticStyle:{position:"relative"}},[t(o.d,{staticStyle:{"background-color":"red",color:"white"}},[e._v("\n        Pay attention!!!\n        "),t(d.a),e._v(" "),t("span",{staticClass:"mdi mdi-close icon-button-class",on:{click:e.closeDialog}})],1),e._v(" "),t(o.c,[t("div",{staticStyle:{display:"flex","min-height":"100px","align-items":"center",color:"red","justify-content":"center"}},[t("span",{staticClass:"mdi mdi-alert",staticStyle:{"font-size":"56px"}}),e._v(" "),t("label",{staticStyle:{"margin-left":"10px","font-size":"20px"}},[e._v(e._s(e.message))])])]),e._v(" "),t(c.a),e._v(" "),t(o.a,[t(d.a),e._v(" "),t(n.a,{attrs:{depressed:"",small:""},on:{click:e.closeDialog}},[e._v("cancel")]),e._v(" "),t(n.a,{staticStyle:{color:"white","background-color":"red"},attrs:{depressed:"",small:""},on:{click:e.deleteRecordHandler}},[e._v("delete")])],1),e._v(" "),e.isLoading?t("LoadingComponent"):e._e()],1)],1)])}),[],!1,null,null,null);t.default=component.exports;installComponents(component,{LoadingComponent:l(572).default})},600:function(e,t,l){"use strict";l.r(t);var n=l(130),r=l(117),o=l(93),c=l(583),d=l(268),f=l(220),m=(l(31),l(12),l(14),l(13),l(6),l(20),l(15),l(21),l(11)),v=l(4),h=(l(55),l(572)),_=l(573),D=l(118);function k(e,t){var l=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),l.push.apply(l,n)}return l}function y(e){for(var t=1;t<arguments.length;t++){var l=null!=arguments[t]?arguments[t]:{};t%2?k(Object(l),!0).forEach((function(t){Object(v.a)(e,t,l[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(l)):k(Object(l)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(l,t))}))}return e}var O={props:{diller:{type:Object}},components:{ErrorComponent:_.default,LoadingComponent:h.default},data:function(){return{errorMessage:null,isLoading:!1,dillerModel:{full_name:null,phone_number:null,password:null,skidka:null}}},methods:y(y({},Object(D.b)({createDiller:"dillers/createDiller",updateDiller:"dillers/updateDiller"})),{},{initData:function(){this.dillerModel.full_name=null,this.dillerModel.password=null,this.dillerModel.phone_number=null,this.dillerModel.skidka=null,this.diller&&(this.dillerModel.full_name=this.diller.full_name,this.dillerModel.phone_number=this.diller.phone_number,this.dillerModel.skidka=this.diller.skidka)},closeDialog:function(){this.$emit("closeDialog")},checkError:function(){return!(!this.diller&&(!this.dillerModel.password||this.dillerModel.password.length<3))&&(!!this.dillerModel.full_name&&this.phone_regex.test(this.dillerModel.phone_number))},saveHandler:function(){var e=this;return Object(m.a)(regeneratorRuntime.mark((function t(){var l,body;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.isLoading){t.next=2;break}return t.abrupt("return");case 2:if(e.checkError()){t.next=5;break}return alert("Some field are incorrect"),t.abrupt("return");case 5:if(e.isLoading=!0,l=!1,!e.diller){t.next=15;break}return delete(body=Object.assign({},e.dillerModel)).password,t.next=12,e.updateDiller({diller_id:e.diller.id,data:body});case 12:l=t.sent,t.next=18;break;case 15:return t.next=17,e.createDiller(e.dillerModel);case 17:l=t.sent;case 18:e.isLoading=!1,l?(e.$emit("initData"),e.closeDialog()):e.errorMessage="Cannot handle request. Please try again";case 20:case"end":return t.stop()}}),t)})))()}}),computed:y({},Object(D.c)({phone_regex:"get_phone_regex"})),mounted:function(){this.initData()}},w=l(87),component=Object(w.a)(O,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"popUpBg"},[t("div",{staticClass:"popUpCardClass"},[t(r.a,{staticStyle:{position:"relative"},attrs:{tile:""}},[t(o.d,[e._v("\n        Diller form\n        "),t(d.a),e._v(" "),t("span",{staticClass:"mdi mdi-close mdi-18px icon-button-class",on:{click:e.closeDialog}})],1),e._v(" "),t(c.a),e._v(" "),t(o.c,[t("label",[e._v("Doly ady:")]),e._v(" "),t(f.a,{attrs:{dense:"",outlined:""},model:{value:e.dillerModel.full_name,callback:function(t){e.$set(e.dillerModel,"full_name",t)},expression:"dillerModel.full_name"}}),e._v(" "),t("label",[e._v("Telefon belgisi:")]),e._v(" "),t(f.a,{attrs:{dense:"",outlined:"",rules:[function(t){return e.phone_regex.test(t)||"Phone number is incorrect"}]},model:{value:e.dillerModel.phone_number,callback:function(t){e.$set(e.dillerModel,"phone_number",t)},expression:"dillerModel.phone_number"}}),e._v(" "),e.diller?e._e():t("div",[t("label",[e._v("Paroly:")]),e._v(" "),t(f.a,{attrs:{dense:"",outlined:"",type:"password",rules:[function(e){return e&&e.length>2||"Password must me at last 3 character"}]},model:{value:e.dillerModel.password,callback:function(t){e.$set(e.dillerModel,"password",t)},expression:"dillerModel.password"}})],1),e._v(" "),t("label",[e._v("Skidka:")]),e._v(" "),t(f.a,{attrs:{dense:"",outlined:"",type:"number"},model:{value:e.dillerModel.skidka,callback:function(t){e.$set(e.dillerModel,"skidka",t)},expression:"dillerModel.skidka"}})],1),e._v(" "),t(o.a,[t(d.a),e._v(" "),t(n.a,{attrs:{small:"",depressed:""},on:{click:e.closeDialog}},[e._v("cancel")]),e._v(" "),t(n.a,{staticStyle:{"background-color":"#32BCA3",color:"white"},attrs:{small:"",depressed:""},on:{click:e.saveHandler}},[e._v("save")])],1),e._v(" "),e.isLoading?t("loading-component"):e._e()],1)],1),e._v(" "),e.errorMessage?t("error-component",{attrs:{message:e.errorMessage},on:{closeError:function(t){e.errorMessage=null}}}):e._e()],1)}),[],!1,null,null,null);t.default=component.exports;installComponents(component,{LoadingComponent:l(572).default,ErrorComponent:l(573).default})},605:function(e,t,l){"use strict";l.r(t);var n=l(130),r=l(117),o=l(93),c=l(583),d=l(268),f=l(220),m=(l(12),l(14),l(13),l(6),l(20),l(15),l(21),l(11)),v=l(4),h=(l(55),l(572)),_=l(118),D=l(573);function k(e,t){var l=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),l.push.apply(l,n)}return l}function y(e){for(var t=1;t<arguments.length;t++){var l=null!=arguments[t]?arguments[t]:{};t%2?k(Object(l),!0).forEach((function(t){Object(v.a)(e,t,l[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(l)):k(Object(l)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(l,t))}))}return e}var O={props:{diller:{type:Object}},components:{ErrorComponent:D.default,LoadingComponent:h.default},data:function(){return{isLoading:!1,password:null,confirm_password:null,errorMessage:null}},methods:y(y({},Object(_.b)({changePassword:"dillers/updateDiller"})),{},{closeDialog:function(){this.$emit("closeDialog")},checkError:function(){return!(!this.password||!this.confirm_password||this.password.length<3&&this.password!==this.confirm_password)},saveHandler:function(){var e=this;return Object(m.a)(regeneratorRuntime.mark((function t(){var l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.isLoading){t.next=2;break}return t.abrupt("return");case 2:if(e.checkError()){t.next=5;break}return alert("Some field is wrong!!!"),t.abrupt("return");case 5:return e.isLoading=!0,t.next=8,e.changePassword({diller_id:e.diller.id,data:{password:e.password}});case 8:l=t.sent,e.isLoading=!1,l?e.closeDialog():e.errorMessage="Cannot change password. Please try again";case 11:case"end":return t.stop()}}),t)})))()}})},w=l(87),component=Object(w.a)(O,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"popUpBg"},[t("div",{staticClass:"popUpCardClass",staticStyle:{width:"30%"}},[t(r.a,{staticStyle:{position:"relative"},attrs:{tile:""}},[t(o.d,[e._v("\n        Change password\n        "),t(d.a),e._v(" "),t("span",{staticClass:"mdi mdi-close mdi-18px icon-button-class",on:{click:e.closeDialog}})],1),e._v(" "),t(c.a),e._v(" "),t(o.c,[t("label",[e._v("Current password:")]),e._v(" "),t(f.a,{attrs:{dense:"",outlined:"",disabled:"",value:e.diller.password_save}}),e._v(" "),t("label",[e._v("New password:")]),e._v(" "),t(f.a,{attrs:{dense:"",outlined:"",rules:[function(e){return e&&e.length>2||"Password is weak"}]},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),e._v(" "),t("label",[e._v("Confirm password:")]),e._v(" "),t(f.a,{attrs:{dense:"",outlined:"",rules:[function(e){return e&&e.length>2||"Password is weak"}]},model:{value:e.confirm_password,callback:function(t){e.confirm_password=t},expression:"confirm_password"}})],1),e._v(" "),t(c.a),e._v(" "),t(o.a,[t(d.a),e._v(" "),t(n.a,{attrs:{depressed:"",small:""},on:{click:e.closeDialog}},[e._v("cancel")]),e._v(" "),t(n.a,{staticStyle:{"background-color":"#32BCA3",color:"white"},attrs:{depressed:"",small:""},on:{click:e.saveHandler}},[e._v("save")])],1),e._v(" "),e.isLoading?t("loading-component"):e._e()],1)],1),e._v(" "),e.errorMessage?t("error-component",{attrs:{message:e.errorMessage},on:{closeError:function(t){e.errorMessage=null}}}):e._e()],1)}),[],!1,null,null,null);t.default=component.exports;installComponents(component,{LoadingComponent:l(572).default,ErrorComponent:l(573).default})},606:function(e,t,l){"use strict";l.r(t);var n=l(130),r=l(117),o=l(93),c=l(583),d=l(268),f=l(220),m=(l(12),l(14),l(13),l(6),l(20),l(15),l(21),l(11)),v=l(4),h=(l(55),l(572)),_=l(573),D=l(118);function k(e,t){var l=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),l.push.apply(l,n)}return l}function y(e){for(var t=1;t<arguments.length;t++){var l=null!=arguments[t]?arguments[t]:{};t%2?k(Object(l),!0).forEach((function(t){Object(v.a)(e,t,l[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(l)):k(Object(l)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(l,t))}))}return e}var O={props:{diller:{type:Object,default:null},fill_type:{type:String,default:"round"}},components:{ErrorComponent:_.default,LoadingComponent:h.default},data:function(){return{isLoading:!1,balance:null,errorMessage:null}},methods:y(y({},Object(D.b)({updateBalance:"dillers/updateBalance"})),{},{closeDialog:function(){this.$emit("closeDialog")},saveBalanceHandler:function(){var e=this;return Object(m.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.isLoading){t.next=2;break}return t.abrupt("return");case 2:return e.isLoading=!0,t.prev=3,t.next=6,e.updateBalance({diller_id:e.diller.id,summ:e.balance});case 6:e.isLoading=!1,e.closeDialog(),t.next=15;break;case 10:t.prev=10,t.t0=t.catch(3),e.isLoading=!1,console.error(t.t0),e.errorMessage="Cannot update balance. Please try again!!!";case 15:case"end":return t.stop()}}),t,null,[[3,10]])})))()}}),mounted:function(){var e;this.balance=(null===(e=this.diller)||void 0===e||null===(e=e.balans)||void 0===e?void 0:e.summ)||0}},w=l(87),component=Object(w.a)(O,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"popUpBg"},[t("div",{staticClass:"popUpCardClass",staticStyle:{width:"30%"}},[t(r.a,{staticStyle:{position:"relative"},attrs:{tile:""}},[t(o.d,[e._v("Update balance\n        "),t(d.a),e._v(" "),t("span",{staticClass:"mdi mdi-close mdi-18px icon-button-class",on:{click:e.closeDialog}})],1),e._v(" "),t(c.a),e._v(" "),t(o.c,[t("label",[e._v("Balance:")]),e._v(" "),t(f.a,{attrs:{type:"number",outlined:"",dense:""},model:{value:e.balance,callback:function(t){e.balance=t},expression:"balance"}})],1),e._v(" "),t(c.a),e._v(" "),t(o.a,[t(d.a),e._v(" "),t(n.a,{attrs:{depressed:"",small:""},on:{click:e.closeDialog}},[e._v("cancel")]),e._v(" "),t(n.a,{staticStyle:{"background-color":"#32BCA3",color:"white"},attrs:{depressed:"",small:""},on:{click:e.saveBalanceHandler}},[e._v("save")])],1),e._v(" "),e.isLoading?t("loading-component"):e._e()],1)],1),e._v(" "),e.errorMessage?t("error-component",{attrs:{message:e.errorMessage},on:{closeError:function(t){e.errorMessage=null}}}):e._e()],1)}),[],!1,null,null,null);t.default=component.exports;installComponents(component,{LoadingComponent:l(572).default,ErrorComponent:l(573).default})},607:function(e,t,l){"use strict";l.r(t);var n=l(117),r=l(93),o=l(638),c=l(583),d=l(584),f=l(268),m=(l(12),l(14),l(13),l(6),l(20),l(15),l(21),l(11)),v=l(4),h=(l(55),l(118));function _(e,t){var l=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),l.push.apply(l,n)}return l}function D(e){for(var t=1;t<arguments.length;t++){var l=null!=arguments[t]?arguments[t]:{};t%2?_(Object(l),!0).forEach((function(t){Object(v.a)(e,t,l[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(l)):_(Object(l)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(l,t))}))}return e}var k={props:{diller:{type:Object,default:null}},data:function(){return{isLoading:!1,page:1,headers:[{text:"Id",value:"id"},{text:"Type",value:"type"},{text:"Action",value:"action"},{text:"Summa",value:"summ"}]}},methods:D(D({},Object(h.b)({loadBalanceHistory:"balansHistory/loadHistory"})),{},{loadData:function(){var e=this;return Object(m.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.isLoading=!0,t.next=3,e.loadBalanceHistory({diller_id:e.diller.id,page:e.page});case 3:e.isLoading=!1;case 4:case"end":return t.stop()}}),t)})))()},closeDialog:function(){this.$emit("closeDialog")}}),computed:D(D({},Object(h.c)({history_list:"balansHistory/get_history_list",total:"balansHistory/get_total_count"})),{},{page_length:function(){return Math.ceil(this.total/20)}}),mounted:function(){this.loadData()}},y=l(87),component=Object(y.a)(k,(function(){var e,t=this,l=t._self._c;return l("div",{staticClass:"popUpBg"},[l("div",{staticClass:"popUpCardClass",staticStyle:{width:"60%"}},[l(n.a,{staticStyle:{position:"relative"},attrs:{tile:""}},[l(r.d,[t._v("\n        Balance history: (Current balance:"+t._s(null===(e=t.diller)||void 0===e||null===(e=e.balans)||void 0===e?void 0:e.summ)+" TMT)\n        "),l(f.a),t._v(" "),l("span",{staticClass:"mdi mdi-close mdi-18px icon-button-class",on:{click:t.closeDialog}})],1),t._v(" "),l(c.a),t._v(" "),l(r.c,[l(o.a,{attrs:{headers:t.headers,items:t.history_list,loading:t.isLoading,"hide-default-footer":"","disable-pagination":""}}),t._v(" "),t.page_length>0?l(d.a,{attrs:{length:t.page_length},model:{value:t.page,callback:function(e){t.page=e},expression:"page"}}):t._e()],1)],1)],1)])}),[],!1,null,null,null);t.default=component.exports},608:function(e,t,l){"use strict";l.r(t);var n=l(130),r=l(117),o=l(93),c=l(583),d=l(268),f=l(220),m=(l(12),l(14),l(13),l(6),l(20),l(15),l(21),l(11)),v=l(4),h=(l(55),l(572)),_=l(573),D=l(118);function k(e,t){var l=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),l.push.apply(l,n)}return l}function y(e){for(var t=1;t<arguments.length;t++){var l=null!=arguments[t]?arguments[t]:{};t%2?k(Object(l),!0).forEach((function(t){Object(v.a)(e,t,l[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(l)):k(Object(l)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(l,t))}))}return e}var O={props:{diller:{type:Object,default:null},fill_type:{type:String,default:"round"}},components:{ErrorComponent:_.default,LoadingComponent:h.default},data:function(){return{isLoading:!1,balance:null,errorMessage:null}},methods:y(y({},Object(D.b)({updateBalance:"dillers/fillUpBalance"})),{},{closeDialog:function(){this.$emit("closeDialog")},saveBalanceHandler:function(){var e=this;return Object(m.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.isLoading){t.next=2;break}return t.abrupt("return");case 2:return e.isLoading=!0,t.prev=3,t.next=6,e.updateBalance({diller_id:e.diller.id,summ:e.balance});case 6:e.isLoading=!1,e.closeDialog(),t.next=15;break;case 10:t.prev=10,t.t0=t.catch(3),e.isLoading=!1,console.error(t.t0),e.errorMessage="Cannot update balance. Please try again!!!";case 15:case"end":return t.stop()}}),t,null,[[3,10]])})))()}})},w=l(87),component=Object(w.a)(O,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"popUpBg"},[t("div",{staticClass:"popUpCardClass",staticStyle:{width:"30%"}},[t(r.a,{staticStyle:{position:"relative"},attrs:{tile:""}},[t(o.d,[e._v("Update balance\n        "),t(d.a),e._v(" "),t("span",{staticClass:"mdi mdi-close mdi-18px icon-button-class",on:{click:e.closeDialog}})],1),e._v(" "),t(c.a),e._v(" "),t(o.c,[t("label",[e._v("Balance:")]),e._v(" "),t(f.a,{attrs:{type:"number",outlined:"",dense:""},model:{value:e.balance,callback:function(t){e.balance=t},expression:"balance"}})],1),e._v(" "),t(c.a),e._v(" "),t(o.a,[t(d.a),e._v(" "),t(n.a,{attrs:{depressed:"",small:""},on:{click:e.closeDialog}},[e._v("cancel")]),e._v(" "),t(n.a,{staticStyle:{"background-color":"#32BCA3",color:"white"},attrs:{disabled:!e.balance,depressed:"",small:""},on:{click:e.saveBalanceHandler}},[e._v("save")])],1),e._v(" "),e.isLoading?t("loading-component"):e._e()],1)],1),e._v(" "),e.errorMessage?t("error-component",{attrs:{message:e.errorMessage},on:{closeError:function(t){e.errorMessage=null}}}):e._e()],1)}),[],!1,null,null,null);t.default=component.exports;installComponents(component,{LoadingComponent:l(572).default,ErrorComponent:l(573).default})},641:function(e,t,l){"use strict";l.r(t);var n=l(130),r=l(93),o=l(638),c=l(583),d=l(584),f=l(268),m=l(220),v=(l(31),l(178),l(12),l(14),l(13),l(6),l(20),l(15),l(21),l(11)),h=l(4),_=(l(55),l(118)),D=l(600),k=l(605),y=l(586),O=l(573),w=l(572),C=l(585),j=l(606),x=l(607);function P(e,t){var l=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),l.push.apply(l,n)}return l}function S(e){for(var t=1;t<arguments.length;t++){var l=null!=arguments[t]?arguments[t]:{};t%2?P(Object(l),!0).forEach((function(t){Object(h.a)(e,t,l[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(l)):P(Object(l)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(l,t))}))}return e}var L={components:{FillUPBalansForm:l(608).default,BalanceHistory:x.default,ChangeBalansForm:j.default,ClientsList:C.default,LoadingComponent:w.default,ErrorComponent:O.default,DeleteConfirmDialog:y.default,ChangePasswordForm:k.default,DillerForm:D.default},data:function(){return{headers:[{text:"ID",value:"id",sortable:!1},{text:"Doly ady",value:"full_name",sortable:!1},{text:"Telefon belgisi",value:"phone_number",sortable:!1},{text:"Skidka:",value:"skidka",width:"200px",sortable:!1},{text:"Kardlar:",value:"client_count",sortable:!1},{text:"Balans",value:"balans",width:"20%",sortable:!1},{text:"Hereketler",value:"actions",align:"right",width:"10%",sortable:!1}],isLoading:!1,page:1,dillerFormDialog:!1,selectedDiller:null,changePasswordForm:!1,deleteConfirmDialog:!1,isDeleting:!1,errorMessage:null,selectedForSkidka:0,skidka:null,clientsListDialog:!1,balanceDialog:!1,balanceHistoryDialog:!1,fillUpBalance:!1,search:null}},watch:{page:function(){this.loadData()},search:function(){this.resetData()}},methods:S(S({},Object(_.b)({loadAllDillers:"dillers/loadAllDillers",removeDiller:"dillers/removeDiller",updateSkidka:"dillers/updateDiller"})),{},{initData:function(){this.page=1,this.resetData()},openFillUpBalance:function(e){this.selectedDiller=e,this.fillUpBalance=!0},closeFillUpDialog:function(){this.selectedDiller=null,this.fillUpBalance=!1},openBalanceHistoryDialog:function(e){this.selectedDiller=e,this.balanceHistoryDialog=!0},closeBalanceHistoryDialog:function(){this.selectedDiller=null,this.balanceHistoryDialog=!1},openBalanceDialog:function(e){this.selectedDiller=e,this.balanceDialog=!0},closeBalanceDialog:function(){this.selectedDiller=null,this.balanceDialog=!1},deleteDillerHandler:function(){var e=this;return Object(v.a)(regeneratorRuntime.mark((function t(){var l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.isDeleting){t.next=2;break}return t.abrupt("return");case 2:return e.isDeleting=!0,t.next=5,e.removeDiller(e.selectedDiller.id);case 5:if(l=t.sent,e.isDeleting=!1,!l){t.next=13;break}return e.closeDeleteConfirmDialog(),t.next=11,e.resetData();case 11:t.next=14;break;case 13:e.errorMessage="Cannot delete diller data. Please try again!";case 14:case"end":return t.stop()}}),t)})))()},loadData:function(){var e=this;return Object(v.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.isLoading=!0,t.next=3,e.loadAllDillers({page:e.page,search:e.search});case 3:e.isLoading=!1;case 4:case"end":return t.stop()}}),t)})))()},resetData:function(){this.page=1,this.loadData()},cancelEditSkidka:function(){this.skidka=null,this.selectedForSkidka=0},openClientsListDialog:function(e){this.selectedDiller=e,this.clientsListDialog=!0},closeClientsListDialog:function(){this.selectedDiller=null,this.clientsListDialog=!1},saveSkidkaHandler:function(){var e=this;return Object(v.a)(regeneratorRuntime.mark((function t(){var l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.isLoading){t.next=2;break}return t.abrupt("return");case 2:return e.isLoading=!0,t.next=5,e.updateSkidka({diller_id:e.selectedForSkidka,data:{skidka:e.skidka}});case 5:l=t.sent,e.isLoading=!1,l?e.cancelEditSkidka():e.errorMessage="Cannot handler request. Please try again!!!";case 8:case"end":return t.stop()}}),t)})))()},selectForEditSkidka:function(e){this.selectedForSkidka=e.id,this.skidka=e.skidka},closeDillerFormDialog:function(){this.selectedDiller=null,this.dillerFormDialog=!1},selectForEdit:function(e){this.selectedDiller=e,this.dillerFormDialog=!0},selectForEditPassword:function(e){this.selectedDiller=e,this.changePasswordForm=!0},closeChangePasswordDialog:function(){this.selectedDiller=null,this.changePasswordForm=!1},closeDeleteConfirmDialog:function(){this.selectedDiller=null,this.deleteConfirmDialog=!1},selectForDelete:function(e){this.selectedDiller=e,this.deleteConfirmDialog=!0}}),computed:S(S({},Object(_.c)({dillers:"dillers/get_dillers_list",total:"dillers/get_total_count"})),{},{pageLength:function(){return Math.ceil(this.total/20)}}),mounted:function(){this.resetData()}},M=l(87),component=Object(M.a)(L,(function(){var e=this,t=e._self._c;return t("div",{staticStyle:{position:"relative"}},[t(r.d,[e._v("\n    Dillerler\n    "),t(f.a),e._v(" "),t(n.a,{staticStyle:{color:"white","background-color":"#32BCA3"},attrs:{depressed:"",small:""},on:{click:function(t){e.dillerFormDialog=!0}}},[t("span",{staticClass:"mdi mdi-plus mdi-18px"})])],1),e._v(" "),t(c.a),e._v(" "),t("div",{staticStyle:{margin:"10px 0"}},[t(m.a,{attrs:{dense:"","hide-details":"",outlined:"",clearable:""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),e._v(" "),t(o.a,{attrs:{headers:e.headers,items:e.dillers,"hide-default-footer":"","disable-pagination":"","calculate-widths":"",loading:e.isLoading},scopedSlots:e._u([{key:"item.balans",fn:function(l){var n,r=l.item;return[t("div",{staticStyle:{"font-size":"18px","justify-content":"space-between",display:"flex","align-items":"center","border-right":"1px solid black"}},[t("strong",[e._v(e._s((null===(n=r.balans)||void 0===n?void 0:n.summ)||0)+" TMT")]),e._v(" "),t("div",[t("span",{staticClass:"mdi mdi-plus mdi-18px icon-button-class",on:{click:function(t){return e.openFillUpBalance(r)}}}),e._v(" "),t("span",{staticClass:"mdi mdi-pencil mdi-18px icon-button-class",on:{click:function(t){return e.openBalanceDialog(r)}}}),e._v(" "),t("span",{staticClass:"mdi mdi-history mdi-18px icon-button-class",on:{click:function(t){return e.openBalanceHistoryDialog(r)}}})])])]}},{key:"item.client_count",fn:function(l){var n=l.item;return[t("div",{staticClass:"icon-button-class",staticStyle:{"font-size":"16px"},on:{click:function(t){return e.openClientsListDialog(n)}}},[e._v("\n        Cards: "),t("strong",[e._v(e._s(n.client_count))])])]}},{key:"item.actions",fn:function(l){var n=l.item;return[t("span",{staticClass:"mdi mdi-shield-edit-outline mdi-18px icon-button-class",on:{click:function(t){return e.selectForEditPassword(n)}}}),e._v(" "),t("span",{staticClass:"mdi mdi-pencil mdi-18px icon-button-class",on:{click:function(t){return e.selectForEdit(n)}}}),e._v(" "),t("span",{staticClass:"mdi mdi-delete mdi-18px icon-button-class",on:{click:function(t){return e.selectForDelete(n)}}})]}},{key:"item.skidka",fn:function(l){var n=l.item;return[e.selectedForSkidka===n.id?t("div",{staticClass:"table-edit-container"},[t("div",[t(m.a,{attrs:{dense:"",outlined:"","hide-details":"","single-line":"",type:"number"},model:{value:e.skidka,callback:function(t){e.skidka=t},expression:"skidka"}})],1),e._v(" "),t("span",{staticClass:"mdi mdi-check icon-button-class",on:{click:e.saveSkidkaHandler}}),e._v(" "),t("span",{staticClass:"mdi mdi-close icon-button-class",on:{click:e.cancelEditSkidka}})]):t("div",{staticClass:"table-edit-container"},[t("strong",{staticStyle:{"font-size":"18px","margin-left":"8px"}},[e._v(e._s(n.skidka))]),e._v(" "),t("span",{staticClass:"mdi mdi-pencil icon-button-class",on:{click:function(t){return e.selectForEditSkidka(n)}}})])]}}])}),e._v(" "),e.pageLength>1?t(d.a,{attrs:{length:e.pageLength,circle:""},model:{value:e.page,callback:function(t){e.page=t},expression:"page"}}):e._e(),e._v(" "),e.dillerFormDialog?t("diller-form",{attrs:{diller:e.selectedDiller},on:{closeDialog:e.closeDillerFormDialog,initData:e.initData}}):e._e(),e._v(" "),e.changePasswordForm?t("change-password-form",{attrs:{diller:e.selectedDiller},on:{closeDialog:e.closeChangePasswordDialog}}):e._e(),e._v(" "),e.deleteConfirmDialog?t("delete-confirm-dialog",{attrs:{"is-loading":e.isDeleting},on:{closeDialog:e.closeDeleteConfirmDialog,deleteAccepted:e.deleteDillerHandler}}):e._e(),e._v(" "),e.errorMessage?t("error-component",{attrs:{message:e.errorMessage},on:{closeError:function(t){e.errorMessage=null}}}):e._e(),e._v(" "),e.isLoading?t("loading-component"):e._e(),e._v(" "),e.clientsListDialog?t("div",{staticClass:"popUpBg",staticStyle:{"background-color":"rgba(0,0,0,0.7)"}},[t("div",{staticClass:"popUpCardClass",staticStyle:{width:"90%","background-color":"white",top:"20px",padding:"20px",bottom:"20px",transform:"translateX(-50%)","border-radius":"3px"}},[t("div",{staticStyle:{border:"1px solid #a9a8a8",height:"100%","border-radius":"3px"}},[t("clients-list",{attrs:{"is-dialog":!0,diller:e.selectedDiller},on:{closeDialog:e.closeClientsListDialog}})],1)])]):e._e(),e._v(" "),e.balanceDialog?t("change-balans-form",{attrs:{diller:e.selectedDiller},on:{closeDialog:e.closeBalanceDialog}}):e._e(),e._v(" "),e.balanceHistoryDialog?t("balance-history",{attrs:{diller:e.selectedDiller},on:{closeDialog:e.closeBalanceHistoryDialog}}):e._e(),e._v(" "),e.fillUpBalance?t("fill-u-p-balans-form",{attrs:{diller:e.selectedDiller},on:{closeDialog:e.closeFillUpDialog}}):e._e()],1)}),[],!1,null,null,null);t.default=component.exports;installComponents(component,{DillerForm:l(600).default,DeleteConfirmDialog:l(586).default,ErrorComponent:l(573).default,LoadingComponent:l(572).default,ClientsList:l(585).default})}}]);